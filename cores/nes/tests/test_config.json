{
  "description": "NES Emulator Test Configuration",
  "repository": "https://github.com/christopherpow/nes-test-roms.git",
  "timeout_seconds": 10,

  "test_suites": {
    "cpu_instructions": {
      "name": "CPU Instructions",
      "description": "Tests all 6502 CPU instructions for correctness",
      "priority": "critical",
      "tests": [
        {"path": "instr_test-v5/rom_singles/01-basics.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/02-implied.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/03-immediate.nes", "expected": "known_fail", "notes": "Unofficial opcode edge case"},
        {"path": "instr_test-v5/rom_singles/04-zero_page.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/05-zp_xy.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/06-absolute.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/07-abs_xy.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/08-ind_x.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/09-ind_y.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/10-branches.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/11-stack.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/12-jmp_jsr.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/13-rts.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/14-rti.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/15-brk.nes", "expected": "pass"},
        {"path": "instr_test-v5/rom_singles/16-special.nes", "expected": "pass"}
      ]
    },

    "cpu_timing": {
      "name": "CPU Timing",
      "description": "Tests CPU instruction cycle timing",
      "priority": "high",
      "tests": [
        {"path": "cpu_timing_test6/cpu_timing_test.nes", "expected": "pass"},
        {"path": "branch_timing_tests/1.Branch_Basics.nes", "expected": "pass"},
        {"path": "branch_timing_tests/2.Backward_Branch.nes", "expected": "pass"},
        {"path": "branch_timing_tests/3.Forward_Branch.nes", "expected": "pass"},
        {"path": "instr_timing/rom_singles/1-instr_timing.nes", "expected": "pass"},
        {"path": "instr_timing/rom_singles/2-branch_timing.nes", "expected": "pass"}
      ]
    },

    "cpu_interrupts": {
      "name": "CPU Interrupts",
      "description": "Tests NMI and IRQ handling",
      "priority": "high",
      "tests": [
        {"path": "cpu_interrupts_v2/rom_singles/1-cli_latency.nes", "expected": "pass"},
        {"path": "cpu_interrupts_v2/rom_singles/2-nmi_and_brk.nes", "expected": "known_fail", "notes": "Requires cycle-accurate interrupt handling"},
        {"path": "cpu_interrupts_v2/rom_singles/3-nmi_and_irq.nes", "expected": "known_fail", "notes": "Requires cycle-accurate interrupt handling"},
        {"path": "cpu_interrupts_v2/rom_singles/4-irq_and_dma.nes", "expected": "known_fail", "notes": "Requires cycle-accurate DMA handling"},
        {"path": "cpu_interrupts_v2/rom_singles/5-branch_delays_irq.nes", "expected": "pass"}
      ]
    },

    "ppu_vbl_nmi": {
      "name": "PPU VBlank/NMI",
      "description": "Tests VBlank flag and NMI timing",
      "priority": "critical",
      "tests": [
        {"path": "ppu_vbl_nmi/rom_singles/01-vbl_basics.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/02-vbl_set_time.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/03-vbl_clear_time.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/04-nmi_control.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/05-nmi_timing.nes", "expected": "known_fail", "notes": "NMI timing edge case - affects few games"},
        {"path": "ppu_vbl_nmi/rom_singles/06-suppression.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/07-nmi_on_timing.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/08-nmi_off_timing.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/09-even_odd_frames.nes", "expected": "pass"},
        {"path": "ppu_vbl_nmi/rom_singles/10-even_odd_timing.nes", "expected": "pass"}
      ]
    },

    "ppu_sprite": {
      "name": "PPU Sprites",
      "description": "Tests sprite rendering and sprite 0 hit",
      "priority": "high",
      "tests": [
        {"path": "sprite_hit_tests_2005.10.05/01.basics.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/02.alignment.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/03.corners.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/04.flip.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/05.left_clip.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/06.right_edge.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/07.screen_bottom.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/08.double_height.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/09.timing_basics.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/10.timing_order.nes", "expected": "pass"},
        {"path": "sprite_hit_tests_2005.10.05/11.edge_timing.nes", "expected": "pass"}
      ]
    },

    "ppu_misc": {
      "name": "PPU Miscellaneous",
      "description": "Other PPU tests",
      "priority": "medium",
      "tests": [
        {"path": "ppu_open_bus/ppu_open_bus.nes", "expected": "pass"},
        {"path": "oam_read/oam_read.nes", "expected": "pass"},
        {"path": "oam_stress/oam_stress.nes", "expected": "pass"}
      ]
    },

    "mmc3": {
      "name": "MMC3 Mapper",
      "description": "Tests MMC3 (Mapper 4) scanline counter and IRQ",
      "priority": "critical",
      "tests": [
        {"path": "mmc3_test_2/rom_singles/1-clocking.nes", "expected": "pass"},
        {"path": "mmc3_test_2/rom_singles/2-details.nes", "expected": "pass"},
        {"path": "mmc3_test_2/rom_singles/3-A12_clocking.nes", "expected": "pass"},
        {"path": "mmc3_test_2/rom_singles/4-scanline_timing.nes", "expected": "known_fail", "notes": "Scanline 0 timing edge case"},
        {"path": "mmc3_test_2/rom_singles/5-MMC3.nes", "expected": "pass"},
        {"path": "mmc3_test_2/rom_singles/6-MMC3_alt.nes", "expected": "known_fail", "notes": "Alternate behavior variant"}
      ]
    },

    "apu": {
      "name": "APU",
      "description": "Audio Processing Unit tests",
      "priority": "medium",
      "tests": [
        {"path": "apu_test/rom_singles/1-len_ctr.nes", "expected": "pass"},
        {"path": "apu_test/rom_singles/2-len_table.nes", "expected": "pass"},
        {"path": "apu_test/rom_singles/3-irq_flag.nes", "expected": "pass"},
        {"path": "apu_test/rom_singles/4-jitter.nes", "expected": "known_fail", "notes": "Frame counter jitter"},
        {"path": "apu_test/rom_singles/5-len_timing.nes", "expected": "known_fail", "notes": "Length counter timing"},
        {"path": "apu_test/rom_singles/6-irq_flag_timing.nes", "expected": "known_fail", "notes": "IRQ flag timing"},
        {"path": "apu_test/rom_singles/7-dmc_basics.nes", "expected": "pass"},
        {"path": "apu_test/rom_singles/8-dmc_rates.nes", "expected": "pass"}
      ]
    },

    "cpu_dummy_reads": {
      "name": "CPU Dummy Reads",
      "description": "Tests CPU dummy read side effects for accurate memory-mapped I/O",
      "priority": "high",
      "tests": [
        {"path": "cpu_dummy_reads/cpu_dummy_reads.nes", "expected": "pass"}
      ]
    },

    "cpu_dummy_writes": {
      "name": "CPU Dummy Writes",
      "description": "Tests CPU dummy write behavior for PPU/APU timing accuracy",
      "priority": "high",
      "tests": [
        {"path": "cpu_dummy_writes/cpu_dummy_writes_oam.nes", "expected": "pass"},
        {"path": "cpu_dummy_writes/cpu_dummy_writes_ppumem.nes", "expected": "pass"}
      ]
    },

    "sprite_overflow": {
      "name": "Sprite Overflow",
      "description": "Tests sprite overflow flag behavior and timing",
      "priority": "high",
      "tests": [
        {"path": "sprite_overflow_tests/1.Basics.nes", "expected": "pass"},
        {"path": "sprite_overflow_tests/2.Details.nes", "expected": "pass"},
        {"path": "sprite_overflow_tests/3.Timing.nes", "expected": "pass"},
        {"path": "sprite_overflow_tests/4.Obscure.nes", "expected": "pass"},
        {"path": "sprite_overflow_tests/5.Emulator.nes", "expected": "pass"}
      ]
    },

    "ppu_read_buffer": {
      "name": "PPU Read Buffer",
      "description": "Tests PPU VRAM read buffer behavior",
      "priority": "medium",
      "tests": [
        {"path": "ppu_read_buffer/test_ppu_read_buffer.nes", "expected": "pass"}
      ]
    },

    "instr_misc": {
      "name": "Instruction Miscellaneous",
      "description": "Tests edge cases in CPU instruction behavior",
      "priority": "medium",
      "tests": [
        {"path": "instr_misc/rom_singles/01-abs_x_wrap.nes", "expected": "pass"},
        {"path": "instr_misc/rom_singles/02-branch_wrap.nes", "expected": "pass"},
        {"path": "instr_misc/rom_singles/03-dummy_reads.nes", "expected": "pass"},
        {"path": "instr_misc/rom_singles/04-dummy_reads_apu.nes", "expected": "pass"}
      ]
    },

    "dmc": {
      "name": "DMC Channel",
      "description": "Delta Modulation Channel tests",
      "priority": "medium",
      "tests": [
        {"path": "dmc_tests/buffer_retained.nes", "expected": "pass"},
        {"path": "dmc_tests/latency.nes", "expected": "pass"},
        {"path": "dmc_tests/status.nes", "expected": "pass"},
        {"path": "dmc_tests/status_irq.nes", "expected": "pass"}
      ]
    },

    "mmc3_irq": {
      "name": "MMC3 IRQ Tests",
      "description": "Additional MMC3 scanline counter and IRQ tests",
      "priority": "high",
      "tests": [
        {"path": "mmc3_irq_tests/1.Clocking.nes", "expected": "pass"},
        {"path": "mmc3_irq_tests/2.Details.nes", "expected": "pass"},
        {"path": "mmc3_irq_tests/3.A12_clocking.nes", "expected": "pass"},
        {"path": "mmc3_irq_tests/4.Scanline_timing.nes", "expected": "pass"},
        {"path": "mmc3_irq_tests/5.MMC3_rev_A.nes", "expected": "pass"},
        {"path": "mmc3_irq_tests/6.MMC3_rev_B.nes", "expected": "pass"}
      ]
    },

    "blargg_cpu": {
      "name": "Blargg CPU Test5",
      "description": "Blargg's comprehensive CPU instruction tests",
      "priority": "critical",
      "tests": [
        {"path": "blargg_nes_cpu_test5/official.nes", "expected": "pass"},
        {"path": "blargg_nes_cpu_test5/cpu.nes", "expected": "pass"}
      ]
    }
  },

  "known_issues": {
    "cpu_interrupts": "NMI/BRK and NMI/IRQ hijacking requires cycle-accurate interrupts - affects very few games",
    "nmi_timing": "Precise NMI timing edge case - affects very few games",
    "mmc3_scanline_timing": "Scanline 0 IRQ timing edge case",
    "mmc3_alt": "MMC3 alternate behavior variant (clone-specific)",
    "apu_timing": "Frame counter jitter and exact IRQ timing - minimal audio impact"
  }
}
