{
  "description": "Game Boy Emulator Test Configuration (Blargg + Mooneye + Cycle-Accurate tests)",
  "timeout_seconds": 60,
  "frame_limit": 3000,

  "repositories": {
    "blargg": {
      "url": "https://github.com/retrio/gb-test-roms.git",
      "dir": "gb-test-roms",
      "type": "git"
    },
    "mooneye": {
      "url": "https://github.com/c-sp/gameboy-test-roms/releases/download/v7.0/game-boy-test-roms-v7.0.zip",
      "dir": "gameboy-test-roms",
      "type": "zip"
    }
  },

  "test_suites": {
    "cpu_instrs": {
      "name": "CPU Instructions (Blargg)",
      "description": "Tests all CPU instructions except STOP and illegal opcodes",
      "priority": "critical",
      "repo": "blargg",
      "tests": [
        {"path": "cpu_instrs/individual/01-special.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/02-interrupts.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/03-op sp,hl.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/04-op r,imm.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/05-op rp.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/06-ld r,r.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/07-jr,jp,call,ret,rst.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/08-misc instrs.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/09-op r,r.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/10-bit ops.gb", "expected": "pass"},
        {"path": "cpu_instrs/individual/11-op a,(hl).gb", "expected": "pass"}
      ]
    },

    "instr_timing": {
      "name": "Instruction Timing (Blargg)",
      "description": "Tests that instructions take the correct number of cycles",
      "priority": "high",
      "repo": "blargg",
      "tests": [
        {"path": "instr_timing/instr_timing.gb", "expected": "pass"}
      ]
    },

    "mem_timing": {
      "name": "Memory Timing (Blargg)",
      "description": "Tests memory access timing",
      "priority": "high",
      "repo": "blargg",
      "tests": [
        {"path": "mem_timing/individual/01-read_timing.gb", "expected": "pass"},
        {"path": "mem_timing/individual/02-write_timing.gb", "expected": "pass"},
        {"path": "mem_timing/individual/03-modify_timing.gb", "expected": "pass"}
      ]
    },

    "oam_bug": {
      "name": "OAM Bug (Blargg)",
      "description": "Tests OAM corruption bug behavior",
      "priority": "low",
      "repo": "blargg",
      "tests": [
        {"path": "oam_bug/oam_bug.gb", "expected": "pass", "notes": "DMG OAM corruption quirk"}
      ]
    },

    "mooneye_bits": {
      "name": "Mooneye - Bits",
      "description": "Tests for bit-level hardware behavior",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/bits/mem_oam.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/bits/reg_f.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/bits/unused_hwio-GS.gb", "expected": "pass"}
      ]
    },

    "mooneye_instr": {
      "name": "Mooneye - Instructions",
      "description": "CPU instruction tests",
      "priority": "critical",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/instr/daa.gb", "expected": "pass"}
      ]
    },

    "mooneye_interrupts": {
      "name": "Mooneye - Interrupts",
      "description": "Interrupt handling tests",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/interrupts/ie_push.gb", "expected": "pass"}
      ]
    },

    "mooneye_oam_dma": {
      "name": "Mooneye - OAM DMA",
      "description": "OAM DMA transfer tests",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/oam_dma/basic.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/oam_dma/reg_read.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/oam_dma/sources-GS.gb", "expected": "pass"}
      ]
    },

    "mooneye_ppu": {
      "name": "Mooneye - PPU",
      "description": "PPU timing and behavior tests - critical for cycle accuracy",
      "priority": "critical",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/ppu/hblank_ly_scx_timing-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_1_2_timing-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_2_0_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_2_mode0_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_2_mode0_timing_sprites.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_2_mode3_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/intr_2_oam_ok_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/lcdon_timing-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/lcdon_write_timing-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/stat_irq_blocking.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/stat_lyc_onoff.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ppu/vblank_stat_intr-GS.gb", "expected": "pass"}
      ]
    },

    "mooneye_timer": {
      "name": "Mooneye - Timer",
      "description": "Timer hardware tests",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/timer/div_write.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/rapid_toggle.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim00.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim00_div_trigger.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim01.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim01_div_trigger.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim10.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim10_div_trigger.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim11.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tim11_div_trigger.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tima_reload.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tima_write_reloading.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/timer/tma_write_reloading.gb", "expected": "pass"}
      ]
    },

    "mooneye_timing": {
      "name": "Mooneye - General Timing",
      "description": "General timing and synchronization tests",
      "priority": "critical",
      "repo": "mooneye",
      "tests": [
        {"path": "mooneye-test-suite/acceptance/add_sp_e_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/call_cc_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/call_cc_timing2.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/call_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/call_timing2.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/di_timing-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/div_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ei_sequence.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ei_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/halt_ime0_ei.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/halt_ime0_nointr_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/halt_ime1_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/halt_ime1_timing2-GS.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/if_ie_registers.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/intr_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/jp_cc_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/jp_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ld_hl_sp_e_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/oam_dma_restart.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/oam_dma_start.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/oam_dma_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/pop_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/push_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/rapid_di_ei.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ret_cc_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/ret_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/reti_intr_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/reti_timing.gb", "expected": "pass"},
        {"path": "mooneye-test-suite/acceptance/rst_timing.gb", "expected": "pass"}
      ]
    },

    "mealybug_ppu": {
      "name": "Mealybug Tearoom - PPU",
      "description": "Advanced PPU timing tests",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "mealybug-tearoom-tests/ppu/m2_win_en_toggle.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_bgp_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_bgp_change_sprites.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_bg_en_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_bg_map_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_obj_en_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_obj_size_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_tile_sel_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_tile_sel_win_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_win_en_change_multiple.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_win_en_change_multiple_wx.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_lcdc_win_map_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_obp0_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_scx_high_5_bits.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_scx_low_3_bits.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_scy_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_window_timing.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_wx_4_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_wx_5_change.gb", "expected": "pass"},
        {"path": "mealybug-tearoom-tests/ppu/m3_wx_6_change.gb", "expected": "pass"}
      ]
    },

    "same_suite_apu": {
      "name": "SameSuite - APU Channel 1",
      "description": "APU accuracy tests from SameBoy's test suite",
      "priority": "medium",
      "repo": "mooneye",
      "tests": [
        {"path": "same-suite/apu/channel_1/channel_1_align.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_delay.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_duty.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_duty_delay.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_extra_length_clocking-cgb0B.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_freq_change.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_nrx2_speed_change.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_restart.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_restart_nrx2_glitch.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_sweep.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_sweep_restart.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_volume.gb", "expected": "pass"},
        {"path": "same-suite/apu/channel_1/channel_1_volume_div.gb", "expected": "pass"}
      ]
    }
  },

  "visual_test_suites": {
    "_note": "These test suites use screenshot comparison for pass/fail detection. Run with --generate-refs to create reference hashes.",

    "dmg_sound": {
      "name": "DMG Sound (Blargg)",
      "description": "Tests DMG audio hardware (screenshot comparison)",
      "priority": "medium",
      "repo": "blargg",
      "tests": [
        {"path": "dmg_sound/rom_singles/01-registers.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/02-len ctr.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/03-trigger.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/04-sweep.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/05-sweep details.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/06-overflow on trigger.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/07-len sweep period sync.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/08-len ctr during power.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/09-wave read while on.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/10-wave trigger while on.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/11-regs after power.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "dmg_sound/rom_singles/12-wave write while on.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600}
      ]
    },

    "cgb_sound": {
      "name": "CGB Sound (Blargg)",
      "description": "Tests CGB audio hardware differences (screenshot comparison)",
      "priority": "medium",
      "repo": "blargg",
      "tests": [
        {"path": "cgb_sound/rom_singles/01-registers.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/02-len ctr.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/03-trigger.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/04-sweep.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/05-sweep details.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/06-overflow on trigger.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/07-len sweep period sync.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/08-len ctr during power.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/09-wave read while on.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/10-wave trigger while on.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/11-regs after power.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600},
        {"path": "cgb_sound/rom_singles/12-wave.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 600}
      ]
    },

    "dmg_acid2": {
      "name": "DMG Acid2",
      "description": "Pixel-perfect PPU rendering test for DMG",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "dmg-acid2/dmg-acid2.gb", "expected": "pass", "test_type": "visual", "screenshot_frame": 60}
      ]
    },

    "cgb_acid2": {
      "name": "CGB Acid2",
      "description": "Pixel-perfect PPU rendering test for CGB",
      "priority": "high",
      "repo": "mooneye",
      "tests": [
        {"path": "cgb-acid2/cgb-acid2.gbc", "expected": "pass", "test_type": "visual", "screenshot_frame": 60}
      ]
    }
  },

  "category_aliases": {
    "blargg": ["cpu_instrs", "instr_timing", "mem_timing", "oam_bug"],
    "mooneye": ["mooneye_bits", "mooneye_instr", "mooneye_interrupts", "mooneye_oam_dma", "mooneye_ppu", "mooneye_timer", "mooneye_timing"],
    "mooneye_ppu": ["mooneye_ppu"],
    "mooneye_timer": ["mooneye_timer"],
    "mealybug": ["mealybug_ppu"],
    "visual": ["dmg_sound", "cgb_sound", "dmg_acid2", "cgb_acid2"],
    "apu": ["same_suite_apu"]
  },

  "known_issues": {
    "cgb_sound": "CGB sound tests require proper CGB mode detection and testing"
  }
}
