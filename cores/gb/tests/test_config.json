{
  "description": "Game Boy Emulator Test Configuration (Blargg's test ROMs)",
  "repository": "https://github.com/retrio/gb-test-roms.git",
  "timeout_seconds": 60,
  "frame_limit": 600,

  "test_suites": {
    "cpu_instrs": {
      "name": "CPU Instructions",
      "description": "Tests all CPU instructions except STOP and illegal opcodes. Uses CRC-32 checksums to verify correct behavior.",
      "priority": "critical",
      "tests": [
        {
          "path": "cpu_instrs/individual/01-special.gb",
          "expected": "pass",
          "description": "Special instructions (DAA, CPL, SCF, CCF)",
          "notes": "Tests decimal adjust, complement, and carry flag instructions"
        },
        {
          "path": "cpu_instrs/individual/02-interrupts.gb",
          "expected": "pass",
          "description": "Interrupt handling (EI, DI, HALT, RETI)",
          "notes": "Tests interrupt enable/disable, halt mode, and return from interrupt"
        },
        {
          "path": "cpu_instrs/individual/03-op sp,hl.gb",
          "expected": "pass",
          "description": "Stack pointer and HL operations",
          "notes": "Tests ADD SP, LD HL,SP+n, etc."
        },
        {
          "path": "cpu_instrs/individual/04-op r,imm.gb",
          "expected": "pass",
          "description": "Register-immediate operations",
          "notes": "Tests operations with immediate values"
        },
        {
          "path": "cpu_instrs/individual/05-op rp.gb",
          "expected": "pass",
          "description": "Register pair operations",
          "notes": "Tests 16-bit register operations"
        },
        {
          "path": "cpu_instrs/individual/06-ld r,r.gb",
          "expected": "pass",
          "description": "Register-to-register loads",
          "notes": "Tests all LD r,r combinations"
        },
        {
          "path": "cpu_instrs/individual/07-jr,jp,call,ret,rst.gb",
          "expected": "pass",
          "description": "Jump, call, and return instructions",
          "notes": "Tests all branching instructions"
        },
        {
          "path": "cpu_instrs/individual/08-misc instrs.gb",
          "expected": "pass",
          "description": "Miscellaneous instructions",
          "notes": "Tests various other instructions"
        },
        {
          "path": "cpu_instrs/individual/09-op r,r.gb",
          "expected": "pass",
          "description": "Register-to-register operations",
          "notes": "Tests arithmetic/logic operations between registers"
        },
        {
          "path": "cpu_instrs/individual/10-bit ops.gb",
          "expected": "pass",
          "description": "Bit manipulation instructions",
          "notes": "Tests BIT, SET, RES, and rotate/shift instructions"
        },
        {
          "path": "cpu_instrs/individual/11-op a,(hl).gb",
          "expected": "pass",
          "description": "Operations with (HL) addressing",
          "notes": "Tests operations using (HL) memory addressing"
        }
      ]
    },

    "instr_timing": {
      "name": "Instruction Timing",
      "description": "Tests that instructions take the correct number of cycles",
      "priority": "high",
      "tests": [
        {
          "path": "instr_timing/instr_timing.gb",
          "expected": "pass",
          "description": "Instruction timing test",
          "notes": "Verifies cycle-accurate instruction timing"
        }
      ]
    },

    "mem_timing": {
      "name": "Memory Timing",
      "description": "Tests memory access timing",
      "priority": "high",
      "tests": [
        {
          "path": "mem_timing/individual/01-read_timing.gb",
          "expected": "pass",
          "description": "Memory read timing",
          "notes": "Tests timing of memory read operations"
        },
        {
          "path": "mem_timing/individual/02-write_timing.gb",
          "expected": "pass",
          "description": "Memory write timing",
          "notes": "Tests timing of memory write operations"
        },
        {
          "path": "mem_timing/individual/03-modify_timing.gb",
          "expected": "pass",
          "description": "Memory modify timing",
          "notes": "Tests timing of read-modify-write operations"
        }
      ]
    },

    "mem_timing_2": {
      "name": "Memory Timing 2",
      "description": "Additional memory timing tests",
      "priority": "high",
      "tests": [
        {
          "path": "mem_timing-2/mem_timing.gb",
          "expected": "pass",
          "description": "Extended memory timing test",
          "notes": "More comprehensive memory timing verification"
        }
      ]
    },

    "dmg_sound": {
      "name": "DMG Sound",
      "description": "Tests DMG (original Game Boy) audio hardware",
      "priority": "medium",
      "tests": [
        {
          "path": "dmg_sound/01-registers.gb",
          "expected": "pass",
          "description": "Sound register behavior",
          "notes": "Tests basic APU register functionality"
        },
        {
          "path": "dmg_sound/02-len ctr.gb",
          "expected": "pass",
          "description": "Length counter",
          "notes": "Tests sound channel length counters"
        },
        {
          "path": "dmg_sound/03-trigger.gb",
          "expected": "pass",
          "description": "Channel trigger behavior",
          "notes": "Tests sound channel triggering"
        },
        {
          "path": "dmg_sound/04-sweep.gb",
          "expected": "pass",
          "description": "Channel 1 sweep",
          "notes": "Tests pulse channel frequency sweep"
        },
        {
          "path": "dmg_sound/05-sweep details.gb",
          "expected": "pass",
          "description": "Sweep edge cases",
          "notes": "Tests sweep unit edge cases and timing"
        },
        {
          "path": "dmg_sound/06-overflow on trigger.gb",
          "expected": "pass",
          "description": "Sweep overflow on trigger",
          "notes": "Tests sweep overflow behavior during channel trigger"
        },
        {
          "path": "dmg_sound/07-len sweep period sync.gb",
          "expected": "pass",
          "description": "Length/sweep period synchronization",
          "notes": "Tests frame sequencer timing"
        },
        {
          "path": "dmg_sound/08-len ctr during power.gb",
          "expected": "pass",
          "description": "Length counter during power transitions",
          "notes": "Tests length counter behavior during power on/off"
        },
        {
          "path": "dmg_sound/09-wave read while on.gb",
          "expected": "pass",
          "description": "Wave RAM reads while playing",
          "notes": "Tests wave channel RAM access during playback"
        },
        {
          "path": "dmg_sound/10-wave trigger while on.gb",
          "expected": "pass",
          "description": "Wave channel trigger while on",
          "notes": "Tests wave channel re-trigger behavior"
        },
        {
          "path": "dmg_sound/11-regs after power.gb",
          "expected": "pass",
          "description": "Registers after power",
          "notes": "Tests APU register state after power on"
        },
        {
          "path": "dmg_sound/12-wave write while on.gb",
          "expected": "pass",
          "description": "Wave RAM writes while playing",
          "notes": "Tests wave channel RAM writes during playback"
        }
      ]
    },

    "cgb_sound": {
      "name": "CGB Sound",
      "description": "Tests CGB (Game Boy Color) audio hardware differences",
      "priority": "medium",
      "tests": [
        {
          "path": "cgb_sound/01-registers.gb",
          "expected": "pass",
          "description": "CGB sound register behavior",
          "notes": "Tests CGB-specific APU register functionality"
        },
        {
          "path": "cgb_sound/02-len ctr.gb",
          "expected": "pass",
          "description": "CGB length counter",
          "notes": "Tests CGB length counter behavior"
        },
        {
          "path": "cgb_sound/03-trigger.gb",
          "expected": "pass",
          "description": "CGB channel trigger behavior",
          "notes": "Tests CGB sound channel triggering"
        },
        {
          "path": "cgb_sound/04-sweep.gb",
          "expected": "pass",
          "description": "CGB channel 1 sweep",
          "notes": "Tests CGB sweep behavior"
        },
        {
          "path": "cgb_sound/05-sweep details.gb",
          "expected": "pass",
          "description": "CGB sweep edge cases",
          "notes": "Tests CGB sweep unit edge cases"
        },
        {
          "path": "cgb_sound/06-overflow on trigger.gb",
          "expected": "pass",
          "description": "CGB sweep overflow on trigger",
          "notes": "Tests CGB sweep overflow behavior"
        },
        {
          "path": "cgb_sound/07-len sweep period sync.gb",
          "expected": "pass",
          "description": "CGB length/sweep synchronization",
          "notes": "Tests CGB frame sequencer timing"
        },
        {
          "path": "cgb_sound/08-len ctr during power.gb",
          "expected": "pass",
          "description": "CGB length counter during power",
          "notes": "Tests CGB length counter power behavior"
        },
        {
          "path": "cgb_sound/09-wave read while on.gb",
          "expected": "pass",
          "description": "CGB wave RAM reads while playing",
          "notes": "Tests CGB wave RAM access"
        },
        {
          "path": "cgb_sound/10-wave trigger while on.gb",
          "expected": "pass",
          "description": "CGB wave channel trigger while on",
          "notes": "Tests CGB wave re-trigger"
        },
        {
          "path": "cgb_sound/11-regs after power.gb",
          "expected": "pass",
          "description": "CGB registers after power",
          "notes": "Tests CGB APU register state"
        },
        {
          "path": "cgb_sound/12-wave write while on.gb",
          "expected": "pass",
          "description": "CGB wave RAM writes while playing",
          "notes": "Tests CGB wave RAM writes"
        }
      ]
    },

    "interrupt_time": {
      "name": "Interrupt Timing",
      "description": "Tests interrupt timing and dispatch",
      "priority": "high",
      "tests": [
        {
          "path": "interrupt_time/interrupt_time.gb",
          "expected": "pass",
          "description": "Interrupt timing test",
          "notes": "Tests precise interrupt dispatch timing"
        }
      ]
    },

    "halt_bug": {
      "name": "HALT Bug",
      "description": "Tests the infamous HALT instruction bug",
      "priority": "medium",
      "tests": [
        {
          "path": "halt_bug.gb",
          "expected": "pass",
          "description": "HALT bug test",
          "notes": "Tests the bug where HALT with IME=0 and pending interrupt causes PC to fail to increment"
        }
      ]
    },

    "oam_bug": {
      "name": "OAM Bug",
      "description": "Tests OAM corruption bug behavior",
      "priority": "low",
      "tests": [
        {
          "path": "oam_bug/oam_bug.gb",
          "expected": "known_fail",
          "description": "OAM corruption bug test",
          "notes": "Tests DMG OAM corruption - this is a quirky hardware bug that many emulators skip"
        }
      ]
    }
  },

  "known_issues": {
    "oam_bug": "OAM corruption bug is a quirky DMG-only behavior that many emulators skip implementing",
    "halt_bug": "HALT bug requires precise interrupt timing to test correctly",
    "cgb_timing": "CGB double-speed mode may have subtle timing differences"
  },

  "hardware_notes": {
    "lr35902": "GB uses Sharp LR35902 CPU (SM83 core) at 4.194304 MHz",
    "ppu_timing": "PPU: 456 dots per scanline, 154 scanlines per frame = 70224 cycles",
    "memory_map": {
      "rom_bank_0": "0x0000-0x3FFF (16KB)",
      "rom_bank_n": "0x4000-0x7FFF (16KB, switchable)",
      "vram": "0x8000-0x9FFF (8KB)",
      "external_ram": "0xA000-0xBFFF (8KB, switchable)",
      "wram": "0xC000-0xDFFF (8KB)",
      "echo_ram": "0xE000-0xFDFF (mirrors WRAM)",
      "oam": "0xFE00-0xFE9F (160 bytes)",
      "io": "0xFF00-0xFF7F",
      "hram": "0xFF80-0xFFFE (127 bytes)",
      "ie": "0xFFFF"
    }
  }
}
